2026-02-17 11:04:14,146 - INFO - root - Logging configured. Level: DEBUG, File: logs/scrollarr.log
Checking for database migrations...
Running alembic upgrade head...
2026-02-17 11:04:14,150 - INFO - alembic.runtime.migration - Context impl SQLiteImpl.
2026-02-17 11:04:14,151 - INFO - alembic.runtime.migration - Will assume non-transactional DDL.
2026-02-17 11:04:14,163 - INFO - alembic.runtime.migration - Running upgrade  -> 5a15aa3bb629, Initial migration
2026-02-17 11:04:14,172 - DEBUG - alembic.runtime.migration - new branch insert 5a15aa3bb629
2026-02-17 11:04:14,179 - INFO - alembic.runtime.migration - Running upgrade 5a15aa3bb629 -> 4ed83310b437, add_download_history
2026-02-17 11:04:14,184 - DEBUG - alembic.runtime.migration - update 5a15aa3bb629 to 4ed83310b437
2026-02-17 11:04:14,188 - INFO - alembic.runtime.migration - Running upgrade 4ed83310b437 -> 0356439e54ae, Add rich metadata fields
2026-02-17 11:04:14,201 - DEBUG - alembic.runtime.migration - update 4ed83310b437 to 0356439e54ae
2026-02-17 11:04:14,204 - INFO - alembic.runtime.migration - Running upgrade 0356439e54ae -> 20260216_add_source_config, Add source config
2026-02-17 11:04:14,208 - DEBUG - alembic.runtime.migration - update 0356439e54ae to 20260216_add_source_config
2026-02-17 11:04:14,211 - INFO - alembic.runtime.migration - Running upgrade 20260216_add_source_config -> 801449fbce51, Ensure stories columns exist
2026-02-17 11:04:14,211 - DEBUG - alembic.runtime.migration - update 20260216_add_source_config to 801449fbce51
2026-02-17 11:04:14,215 - INFO - alembic.runtime.migration - Running upgrade 801449fbce51 -> 9a8b7c6d5e4f, Add ebook profiles
2026-02-17 11:04:14,235 - DEBUG - alembic.runtime.migration - update 801449fbce51 to 9a8b7c6d5e4f
2026-02-17 11:04:14,240 - INFO - alembic.runtime.migration - Running upgrade 9a8b7c6d5e4f -> c109d92524fd, Repair download_history table
2026-02-17 11:04:14,241 - DEBUG - alembic.runtime.migration - update 9a8b7c6d5e4f to c109d92524fd
2026-02-17 11:04:14,244 - INFO - alembic.runtime.migration - Running upgrade c109d92524fd -> a1b2c3d4e5f6, Add notification settings
2026-02-17 11:04:14,249 - DEBUG - alembic.runtime.migration - update c109d92524fd to a1b2c3d4e5f6
2026-02-17 11:04:14,253 - INFO - alembic.runtime.migration - Running upgrade a1b2c3d4e5f6 -> 8e02ca194f50, add_published_date_to_chapters
2026-02-17 11:04:14,257 - DEBUG - alembic.runtime.migration - update a1b2c3d4e5f6 to 8e02ca194f50
2026-02-17 11:04:14,260 - INFO - alembic.runtime.migration - Running upgrade 8e02ca194f50 -> 202602181200, add_pdf_page_size
2026-02-17 11:04:14,264 - DEBUG - alembic.runtime.migration - update 8e02ca194f50 to 202602181200
2026-02-17 11:04:14,267 - INFO - alembic.runtime.migration - Running upgrade 202602181200 -> 20260219_add_qq_source, Add Questionable Questing source
2026-02-17 11:04:14,268 - DEBUG - alembic.runtime.migration - update 202602181200 to 20260219_add_qq_source
2026-02-17 11:04:14,271 - INFO - alembic.runtime.migration - Running upgrade 20260219_add_qq_source -> 20260220_add_vol_provider, Add volume_title and provider_name
2026-02-17 11:04:14,277 - DEBUG - alembic.runtime.migration - update 20260219_add_qq_source to 20260220_add_vol_provider
2026-02-17 11:04:14,281 - INFO - alembic.runtime.migration - Running upgrade 20260220_add_vol_provider -> 20260220_add_qq_all, Add Questionable Questing (All Posts) source record
2026-02-17 11:04:14,282 - DEBUG - alembic.runtime.migration - update 20260220_add_vol_provider to 20260220_add_qq_all
Migrations completed.
2026-02-17 11:04:14,305 - INFO - story_manager - Reloaded providers. 4 providers active.
2026-02-17 11:04:14,306 - INFO - story_manager - StoryManager initialized and providers registered.
2026-02-17 11:04:14,321 - DEBUG - tzlocal - /etc/timezone found, contents:
 Etc/UTC

2026-02-17 11:04:14,323 - DEBUG - tzlocal - /etc/localtime found
2026-02-17 11:04:14,328 - DEBUG - tzlocal - 2 found:
 {'/etc/timezone': 'Etc/UTC', '/etc/localtime is a symlink to': 'Etc/UTC'}
Checking for database migrations...
Running alembic upgrade head...
2026-02-17 11:04:14,331 - INFO - alembic.runtime.migration - Context impl SQLiteImpl.
2026-02-17 11:04:14,331 - INFO - alembic.runtime.migration - Will assume non-transactional DDL.
Migrations completed.
2026-02-17 11:04:14,340 - INFO - story_manager - Reloaded providers. 4 providers active.
2026-02-17 11:04:14,340 - INFO - story_manager - StoryManager initialized and providers registered.
INFO:     Started server process [2530]
INFO:     Waiting for application startup.
Checking for database migrations...
Running alembic upgrade head...
2026-02-17 11:04:14,415 - INFO - alembic.runtime.migration - Context impl SQLiteImpl.
2026-02-17 11:04:14,415 - INFO - alembic.runtime.migration - Will assume non-transactional DDL.
Migrations completed.
2026-02-17 11:04:14,422 - INFO - apscheduler.scheduler - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-17 11:04:14,423 - INFO - apscheduler.scheduler - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-17 11:04:14,423 - INFO - apscheduler.scheduler - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-17 11:04:14,423 - INFO - job_manager - Jobs updated: check_updates (every 1h), download_queue (every 30.0s), check_metadata (every 12h)
2026-02-17 11:04:14,423 - INFO - job_manager - Scheduled job: JobManager.check_for_updates (trigger: interval[1:00:00], pending)
2026-02-17 11:04:14,423 - INFO - job_manager - Scheduled job: JobManager.process_download_queue (trigger: interval[0:00:30], pending)
2026-02-17 11:04:14,423 - INFO - job_manager - Scheduled job: JobManager.check_missing_metadata (trigger: interval[12:00:00], pending)
2026-02-17 11:04:14,423 - INFO - apscheduler.scheduler - Added job "JobManager.check_for_updates" to job store "default"
2026-02-17 11:04:14,423 - INFO - apscheduler.scheduler - Added job "JobManager.process_download_queue" to job store "default"
2026-02-17 11:04:14,423 - INFO - apscheduler.scheduler - Added job "JobManager.check_missing_metadata" to job store "default"
2026-02-17 11:04:14,424 - INFO - apscheduler.scheduler - Scheduler started
2026-02-17 11:04:14,424 - DEBUG - apscheduler.scheduler - Looking for jobs to run
2026-02-17 11:04:14,424 - DEBUG - apscheduler.scheduler - Next wakeup is due at 2026-02-17 11:04:44.422948+00:00 (in 29.998167 seconds)
2026-02-17 11:04:14,425 - INFO - apscheduler.scheduler - Added job "JobManager.check_missing_metadata" to job store "default"
2026-02-17 11:04:14,425 - INFO - job_manager - JobManager started.
INFO:     Application startup complete.
2026-02-17 11:04:14,426 - DEBUG - apscheduler.scheduler - Looking for jobs to run
2026-02-17 11:04:14,427 - DEBUG - apscheduler.scheduler - Next wakeup is due at 2026-02-17 11:04:24.425015+00:00 (in 9.997804 seconds)
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2026-02-17 11:04:24,425 - DEBUG - apscheduler.scheduler - Looking for jobs to run
2026-02-17 11:04:24,426 - INFO - apscheduler.executors.default - Running job "JobManager.check_missing_metadata (trigger: date[2026-02-17 11:04:24 UTC], next run at: 2026-02-17 11:04:24 UTC)" (scheduled at 2026-02-17 11:04:24.425015+00:00)
2026-02-17 11:04:24,426 - INFO - job_manager - Running scheduled metadata check...
2026-02-17 11:04:24,426 - INFO - apscheduler.scheduler - Removed job check_metadata_startup
2026-02-17 11:04:24,427 - INFO - story_manager - Checking for stories with missing metadata...
2026-02-17 11:04:24,427 - DEBUG - apscheduler.scheduler - Next wakeup is due at 2026-02-17 11:04:44.422948+00:00 (in 19.995529 seconds)
2026-02-17 11:04:24,432 - INFO - story_manager - No stories found with missing metadata.
2026-02-17 11:04:24,433 - INFO - apscheduler.executors.default - Job "JobManager.check_missing_metadata (trigger: date[2026-02-17 11:04:24 UTC], next run at: 2026-02-17 11:04:24 UTC)" executed successfully
2026-02-17 11:04:44,428 - DEBUG - apscheduler.scheduler - Looking for jobs to run
2026-02-17 11:04:44,429 - DEBUG - apscheduler.scheduler - Next wakeup is due at 2026-02-17 11:05:14.422948+00:00 (in 29.993659 seconds)
2026-02-17 11:04:44,429 - INFO - apscheduler.executors.default - Running job "JobManager.process_download_queue (trigger: interval[0:00:30], next run at: 2026-02-17 11:05:14 UTC)" (scheduled at 2026-02-17 11:04:44.422948+00:00)
2026-02-17 11:04:44,429 - INFO - job_manager - Checking download queue for pending chapters...
2026-02-17 11:04:44,434 - DEBUG - job_manager - No pending chapters found.
2026-02-17 11:04:44,434 - INFO - job_manager - Download queue empty or processing stopped.
2026-02-17 11:04:44,435 - INFO - apscheduler.executors.default - Job "JobManager.process_download_queue (trigger: interval[0:00:30], next run at: 2026-02-17 11:05:14 UTC)" executed successfully
2026-02-17 11:05:14,423 - DEBUG - apscheduler.scheduler - Looking for jobs to run
2026-02-17 11:05:14,423 - DEBUG - apscheduler.scheduler - Next wakeup is due at 2026-02-17 11:05:44.422948+00:00 (in 29.998989 seconds)
2026-02-17 11:05:14,424 - INFO - apscheduler.executors.default - Running job "JobManager.process_download_queue (trigger: interval[0:00:30], next run at: 2026-02-17 11:05:44 UTC)" (scheduled at 2026-02-17 11:05:14.422948+00:00)
2026-02-17 11:05:14,424 - INFO - job_manager - Checking download queue for pending chapters...
2026-02-17 11:05:14,429 - INFO - job_manager - Processing chapter: Chapter 4 (ID: 4) from story: Test Story
2026-02-17 11:05:14,430 - ERROR - job_manager - Failed to download chapter Chapter 4: No provider found for story URL: http://example.com/story
2026-02-17 11:05:14,450 - INFO - job_manager - Processing chapter: Chapter 5 (ID: 5) from story: Test Story
2026-02-17 11:05:14,454 - ERROR - job_manager - Failed to download chapter Chapter 5: No provider found for story URL: http://example.com/story
2026-02-17 11:05:14,464 - INFO - job_manager - Processing chapter: Chapter 6 (ID: 6) from story: Test Story
2026-02-17 11:05:14,464 - ERROR - job_manager - Failed to download chapter Chapter 6: No provider found for story URL: http://example.com/story
2026-02-17 11:05:14,476 - DEBUG - job_manager - No pending chapters found.
2026-02-17 11:05:14,476 - INFO - job_manager - Download queue empty or processing stopped.
2026-02-17 11:05:14,476 - INFO - apscheduler.executors.default - Job "JobManager.process_download_queue (trigger: interval[0:00:30], next run at: 2026-02-17 11:05:44 UTC)" executed successfully
INFO:     127.0.0.1:34794 - "GET /story/1 HTTP/1.1" 200 OK
2026-02-17 11:05:44,423 - DEBUG - apscheduler.scheduler - Looking for jobs to run
2026-02-17 11:05:44,423 - DEBUG - apscheduler.scheduler - Next wakeup is due at 2026-02-17 11:06:14.422948+00:00 (in 29.999056 seconds)
2026-02-17 11:05:44,424 - INFO - apscheduler.executors.default - Running job "JobManager.process_download_queue (trigger: interval[0:00:30], next run at: 2026-02-17 11:06:14 UTC)" (scheduled at 2026-02-17 11:05:44.422948+00:00)
2026-02-17 11:05:44,424 - INFO - job_manager - Checking download queue for pending chapters...
2026-02-17 11:05:44,425 - DEBUG - job_manager - No pending chapters found.
2026-02-17 11:05:44,426 - INFO - job_manager - Download queue empty or processing stopped.
2026-02-17 11:05:44,426 - INFO - apscheduler.executors.default - Job "JobManager.process_download_queue (trigger: interval[0:00:30], next run at: 2026-02-17 11:06:14 UTC)" executed successfully
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2026-02-17 11:05:52,372 - INFO - apscheduler.scheduler - Scheduler has been shut down
2026-02-17 11:05:52,373 - DEBUG - apscheduler.scheduler - Looking for jobs to run
2026-02-17 11:05:52,373 - DEBUG - apscheduler.scheduler - No jobs; waiting until a job is added
2026-02-17 11:05:52,373 - INFO - job_manager - JobManager stopped.
INFO:     Application shutdown complete.
INFO:     Finished server process [2530]
